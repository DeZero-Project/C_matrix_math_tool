# 設計書：行列計算ツール（簡易版）

## 1. データ構造
- **構造体定義**: 
  - `typedef struct { int rows; int cols; float *data; } Matrix;` 
        - `rows`: 行の大きさ
        - `cols`: 列の大きさ
        - `*data`: 行列に格納されたデータを指すポインタ
- **メモリ配置**: 
  - 構造体定義: NumPyのような計算を再現するため、1次元配列を論理的に2次元配列として定義
  - インデックス計算式: `index = i * cols + j`

## 2. モジュール構成
- `main.c`: 実行フロー
- `matrix.c`: 行列の作成・純粋な計算ロジック

## 3. 関数詳細仕様

### 3.1 [create_matrix]
- **プロトタイプ**: `Matrix *create_matrix(int cols, int rows);`
- **引数**:
  - `cols`: 列のサイズ
  - `rows`: 行のサイズ
- **戻り値**:
  - 成功時：`Matrix m`で作成した構造体へのポインタを返す。
  - 失敗時：プログラムを強制終了(`exit 1`)
- **処理内容（アルゴリズム）**:
  1. 構造体`Matrix`を定義
  2. 構造体に引数で渡された値を格納
  3. 変数`Matrix *m`を定義しmallocで`*m`と同じサイズの領域を確保
  4. 変数`Matrix *m`の指す先の領域を`(*m).data = malloc(sizeof(float)* rows * cols)`で確保
  5. `Matrix`型のポインタ `m`を使い構造体へのポインタを返す
- **メモリ管理**:
  - 関数内で `malloc` を使いメモリを確保。戻り値のメモリ解放責任は呼び出し側に帰属する。

### 3.2 [print_matrix]
- **プロトタイプ**: `Matrix *print_matrix(Matrix *data);`
- **引数**:
  - `Matrix *data`: 構造体へのポインタ

- **戻り値**:
  - 成功時：`return data;`
  - 失敗時：プログラムを強制終了(`exit 1`)
- **処理内容（アルゴリズム）**:
  - 2重ループを用いて各インデックスを`%f`で出力
- **メモリ管理**:
  - 配列の操作を行わないため不要。

### 3.3 [add_matrix]
- **プロトタイプ**: `Matrix *add_matrix(Matrix *data_x, Matrix *data_y);`
- **引数**:
  - `Matrix *data_x`: 計算に使用する配列
  - `Matrix *data_y`: 計算に使用する配列
- **戻り値**:
  - 成功時：`return y;`
  - 失敗時：プログラムを強制終了(`exit 1`)
- **処理内容（アルゴリズム）**:
  1. 配列`data_x`と配列`data_y`の形状が一致しているか確認
  2. `create_matrix`を使い計算結果を格納するための配列`y`を作成
  3. 2重ループを使い、配列`data_x`と配列`data_y`で対応するインデックス同士を加算
  4. 加算した値を配列 `y` に格納
  5. 戻り値として`Matrix`型のポインタ `y`を返す
- **メモリ管理**:
  - 関数内で `malloc` を行い配列を確保。戻り値のメモリ解放責任は呼び出し側に帰属。

## 4. 共通エラー処理規定
- `fprintf` への出力を行い `exit` を実行。

## 5. 制限事項
- 現時点で扱える値はfloatのみとする。